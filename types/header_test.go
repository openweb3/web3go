package types

import (
	"encoding/json"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestMarhsalHeader(t *testing.T) {
	expect := `{"parentHash":"0x286a356b438dfa21243799cd31cbd0d9a4f66c1c701ff36aa057ce338b444290","sha3Uncles":"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347","miner":"0x166d0ff7691030b0ca33d4e60e842cd300a3010d","stateRoot":"0xcc8d03c2f1f3ff92de2782a87ba538e60bfa185ec83b2b4be743adb7c5f8f73c","transactionsRoot":"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470","receiptsRoot":"0x09f8709ea9f344a810811a373b30861568f5686e649d6177fd92ea2db7477508","logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","difficulty":"0x36482e1","number":"0x6a95094","gasLimit":"0x1c9c380","gasUsed":"0x0","timestamp":"0x63f2e8c7","extraData":"0x","mixHash":"0x0000000000000000000000000000000000000000000000000000000000000000","nonce":"0x0000000000000000","baseFeePerGas":null,"hash":"0xce263bf1c206021cdf61bc983c6960ecc036db036a8eceea003563322da14177","author":"0x166d0ff7691030b0ca33d4e60e842cd300a3010d"}`

	var h Header
	err := json.Unmarshal([]byte(expect), &h)
	assert.NoError(t, err)

	actual, err := json.Marshal(&h)
	assert.NoError(t, err)

	assert.Equal(t, expect, string(actual))
}
